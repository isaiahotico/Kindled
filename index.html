<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Reward Clicker Ads ‚Äî Final</title>

<link rel="manifest" href="manifest.json">
<link rel="stylesheet" href="style.css">

<!-- Monetag SDK (primary) -->
<script async src="//libtl.com/sdk.js" data-zone="10276123" data-sdk="show_10276123"></script>

<!-- Prefetch Adsterra fallback links to speed failover -->
<link rel="prefetch" href="https://www.effectivegatecpm.com/ai7csj41?key=7e287f34b34183342aa072ceeccb42cf">
<link rel="prefetch" href="https://www.effectivegatecpm.com/hebhpc3tcm?key=e18e0c3b11bce2e7a0d722f6ac554232">

<!-- YouTube IFrame API for withdrawal verification -->
<script async src="https://www.youtube.com/iframe_api"></script>

<script>
  // performance flags
  window.__APP_START = Date.now();
  document.addEventListener('touchstart', function(){}, {passive: true});
</script>
</head>
<body>
<canvas id="starsCanvas" aria-hidden="true"></canvas>

<main id="app" class="app" role="application" aria-label="Reward Clicker Ads">
  <header class="header">
    <h1 id="appTitle" class="title">Reward Clicker Ads</h1>
    <div class="meta">
      <div class="meta-item"><span class="meta-key">Points</span><span id="points" class="meta-val">0</span></div>
      <div class="meta-item"><span class="meta-key">PHP</span><span id="phpValue" class="meta-val">‚Ç±0.0000</span></div>
      <div class="meta-item"><span class="meta-key">Referral</span><span id="myReferral" class="meta-val">---</span></div>
    </div>
  </header>

  <section class="controls">
    <button id="claimAffiliateBtn" class="btn btn-main">Claim Affiliate Rewards</button>

    <div class="buttons-row">
      <button id="adBtn1" class="btn btn-main">Watch Ad 1 (Auto-Play)</button>
      <button id="adBtn2" class="btn btn-main">Watch Ad 2</button>
      <button id="adBtn3" class="btn btn-main">Watch Ad 3 (Popup)</button>
    </div>

    <div class="buttons-row">
      <button id="specialEventBtn" class="btn btn-main">Special Event</button>
      <button id="globalChatBtn" class="btn btn-main">Global Chat</button>
    </div>

    <div class="buttons-row">
      <button id="withdrawBtn" class="btn btn-secondary">Withdraw GCash</button>
      <button id="historyBtn" class="btn btn-secondary">User History</button>
      <button id="ownerControlBtn" class="btn btn-admin">Owner Control</button>
    </div>
  </section>

  <div id="panels">
    <!-- Withdraw Panel -->
    <div id="withdrawPanel" class="panel hidden" role="dialog" aria-modal="true">
      <h2 class="panel-title">Withdraw GCash</h2>
      <p>1 point = <b>0.0012 PHP</b></p>
      <div id="youtubeContainer"><div id="player"></div><p id="youtubeMsg">Watch the full video to unlock withdrawal</p></div>
      <input id="withdrawCode" placeholder="Enter withdrawal code" />
      <input id="gcashNumber" placeholder="Enter GCash number" />
      <div class="row"><button id="submitWithdraw" class="btn btn-main" disabled>Submit Withdrawal</button><button class="btn btn-secondary closePanel">Close</button></div>
      <div id="withdrawHistory" class="scrollable"></div>
    </div>

    <!-- History Panel -->
    <div id="historyPanel" class="panel hidden" role="dialog">
      <h2 class="panel-title">Your History</h2>
      <div id="historyLog" class="scrollable"></div>
      <button class="btn btn-secondary closePanel">Close</button>
    </div>

    <!-- Owner Panel -->
    <div id="ownerPanel" class="panel hidden" role="dialog">
      <h2 class="panel-title">Owner Dashboard</h2>
      <div class="owner-settings">
        <label>Set YouTube Video URL</label>
        <input id="setYTLink" placeholder="Enter YouTube URL" />
        <button id="saveYTLink" class="btn btn-main owner-action">Save URL</button>

        <label>Set Withdrawal Code</label>
        <input id="setWithdrawCode" placeholder="Enter code (e.g. TKGAH)" />
        <button id="saveWithdrawCode" class="btn btn-main owner-action">Save Code</button>
      </div>

      <h3>Pending Withdrawals</h3>
      <div id="pendingList" class="scrollable"></div>

      <h3>Approved Logs</h3>
      <div id="approvedList" class="scrollable"></div>

      <button class="btn btn-secondary closePanel">Close</button>
    </div>

    <!-- Special Event Panel -->
    <div id="specialEventPanel" class="panel hidden" role="dialog">
      <h2 class="panel-title">üåü White Star Guardian</h2>
      <p class="event-desc">The White Star Guardian has <b>50,000 HP</b>. Every point you earn reduces its HP by 1. The last 3 unique users who land the final hits get <b>2,500 points</b> each. After defeat, a new guardian spawns after 2 hours.</p>
      <div class="guardian-bar-container"><div id="guardianBar" class="guardian-bar"></div><span id="guardianHP">50,000 HP</span></div>
      <div id="eventLeaderboard" class="scrollable"></div>
      <p id="nextEventTimer">Next Guardian: --:--:--</p>
      <button class="btn btn-secondary closePanel">Close</button>
    </div>

    <!-- Global Chat Panel -->
    <div id="globalChatPanel" class="panel hidden" role="dialog">
      <h2 class="panel-title">üåê Global Chat</h2>
      <div id="chatLog" class="scrollable chat-log" aria-live="polite"></div>
      <input id="chatInput" placeholder="Type a message..." />
      <div class="row"><button id="sendChat" class="btn btn-main">Send</button><button class="btn btn-secondary closePanel">Close</button></div>
    </div>
  </div>
</main>

<script src="app.js" defer></script>
</body>
</html>
