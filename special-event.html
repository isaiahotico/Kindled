<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Special Event</title>
<link rel="stylesheet" href="style.css">
<script src="app.js" defer></script>
</head>
<body>
<h1>Water Guardian Event</h1>
<p>Guardian HP: <span id="hp">50000</span></p>
<button onclick="contributeCoin()">Contribute 1 Coin</button>
<div id="topContributors"></div>
<button onclick="nav('index.html')">Back</button>
<script>
let hp=50000;
let contributors={};
function contributeCoin(){
  if(coins()<1){alert('Not enough coins!');return;}
  addCoin(-1);
  hp--; updateHP();
  const user = localStorage.getItem('username')||'Guest';
  contributors[user] = (contributors[user]||0)+1;
  updateContributors();
  if(hp<=0){alert('Water Guardian healed! Rewards distributed.'); hp=50000; contributors={}; updateHP(); updateContributors();}
}
function updateHP(){document.getElementById('hp').innerText=hp;}
function updateContributors(){
  const div=document.getElementById('topContributors');
  div.innerHTML='<h3>Top Contributors</h3>';
  Object.keys(contributors).sort((a,b)=>contributors[b]-contributors[a]).slice(0,10).forEach(u=>{
    div.innerHTML+='<p>'+u+': '+contributors[u]+' HP</p>';
  });
}
</script>
</body>
</html>
